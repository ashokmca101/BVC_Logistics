<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>FSE_Assignment</name>
        <label>FSE Assignment</label>
        <locationX>578</locationX>
        <locationY>4031</locationY>
        <actionName>TMS_ShipmentAssignment</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Delivery_Assignment_Notification_1_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>newShipmentList</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>FSE_Assignment_by_Route_Number</name>
        <label>FSE Assignment by Route Number</label>
        <locationX>314</locationX>
        <locationY>4031</locationY>
        <actionName>TMS_ShipmentAssignment</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Delivery_Assignment_Notification_1_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>newShipmentList</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Payment_Status_Update</name>
        <label>Payment Status Update</label>
        <locationX>182</locationX>
        <locationY>6671</locationY>
        <actionName>TMS_PaymentStatusSync</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Update_Assign_ID</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Update_Sync_Status</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>shipmentList</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Notification</name>
        <label>Send Notification</label>
        <locationX>314</locationX>
        <locationY>3731</locationY>
        <actionName>Shipment__c.Alert_to_Hub_Manager_for_count_mismatch</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>FSE_Delivery_Assignment_By_Route_Number</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Update_Destination_hub_Manager_fields</name>
        <label>Update Destination hub Manager Fields</label>
        <locationX>314</locationX>
        <locationY>1631</locationY>
        <actionName>TMS_GetHubManagerOnShipment</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Check_Route_Number</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>shipmentlist</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Update_Origin_Hub_Manager_fields</name>
        <label>Update Origin Hub Manager fields</label>
        <locationX>314</locationX>
        <locationY>1331</locationY>
        <actionName>TMS_GetHubManagerOnShipment</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Destination_Hub_Manager</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>shipmentlist</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Update_Shipping_note_Number</name>
        <label>Update Shipping note Number</label>
        <locationX>314</locationX>
        <locationY>2831</locationY>
        <actionName>TMS_UpdateShipment_ShippingNoteNo</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Origin_Hub_Type_Check</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>shipmentList</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>53.0</apiVersion>
    <assignments>
        <name>Assignee_Shipment_Destination_Hub_Type</name>
        <label>Assignee Shipment Destination Hub &amp; Type</label>
        <locationX>314</locationX>
        <locationY>3431</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Destination_Hub__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Destination_Address_Name__r.Active_Pincode__r.Hub__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Destination_Pincode_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Destination_Address_Name__r.Active_Pincode__r.Pincode_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Destination_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Destination_Address_Name__r.Active_Pincode__r.Online_Offline__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Mismatch_notification</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignee_Shipment_Origin_Hub_Type</name>
        <label>Assignee Shipment Origin Hub &amp; Type</label>
        <locationX>314</locationX>
        <locationY>3131</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Origin_Hub__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Origin_Address_Name__r.Active_Pincode__r.Hub__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Origin_Pincode_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Origin_Address_Name__r.Active_Pincode__r.Pincode_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Origin_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Origin_Address_Name__r.Active_Pincode__r.Online_Offline__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Destination_Hub_Type_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Delivery_Assignment_Hub</name>
        <label>Delivery Assignment Hub</label>
        <locationX>50</locationX>
        <locationY>4031</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Delivery_Route_Assigned_To__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Pickup__r.Pickup_Assigned_To__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Delivery_Assignment_Notification_1_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Delivery_Record_Assignment</name>
        <label>Delivery Record Assignment</label>
        <locationX>380</locationX>
        <locationY>4763</locationY>
        <assignmentItems>
            <assignToReference>DELIVERY_RECORD.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Delivery_Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DELIVERY_RECORD.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Created</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DELIVERY_RECORD.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Delivery_Route_Assigned_To__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Delivery_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Notification_0</name>
        <label>Notification</label>
        <locationX>248</locationX>
        <locationY>4331</locationY>
        <assignmentItems>
            <assignToReference>TaskRecord.Priority</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>High</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskRecord.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskRecord.TaskSubtype</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Task</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskRecord.WhatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskRecord.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TaskSubject</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskRecord.Description</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TaskDescription</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskRecord.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Delivery_Route_Assigned_To__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Task_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Out_for_Pickup</name>
        <label>Out for Pickup</label>
        <locationX>314</locationX>
        <locationY>539</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Tracking_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Created</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Is_Pickup_Created__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>BVC_Weighment_Done</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Ready_for_Rebilling_set_to_True</name>
        <label>Ready for Rebilling set to True</label>
        <locationX>314</locationX>
        <locationY>2531</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Verified_for_Billing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pending Billing</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Shipping_note_number</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Value_to_Indirect_Account</name>
        <label>Set Value to Indirect Account</label>
        <locationX>314</locationX>
        <locationY>5363</locationY>
        <assignmentItems>
            <assignToReference>$Record.Indirect_Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>IndirectAccount</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Tracking_Status_is_equal_to_delivered</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Verified_for_Billing_to_True</name>
        <label>Set Verified for Billing to True</label>
        <locationX>314</locationX>
        <locationY>2231</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Verified For Billing</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Ready_for_Rebilling</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Assign_ID</name>
        <label>Update Assign ID</label>
        <locationX>446</locationX>
        <locationY>7103</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Default_Shipment_Value</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Delivery_Instruction</name>
        <label>Update Delivery Instruction</label>
        <locationX>314</locationX>
        <locationY>6371</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Delivery_Instruction__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Hold</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Sync_Payment_Status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Delivery_Status</name>
        <label>Update Delivery Status</label>
        <locationX>160</locationX>
        <locationY>5879</locationY>
        <assignmentItems>
            <assignToReference>DELIVERY_RECORD.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Delivery_Record_for_delivery.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DELIVERY_RECORD.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Delivered</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Delivery_Status_to_Delivered</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Route_Number</name>
        <label>Update Route Number</label>
        <locationX>314</locationX>
        <locationY>1931</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Delivery_Route_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Destination_Address_Name__r.Delivery_Route_Number__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Verified_for_Billing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Shipment_ID_0</name>
        <label>Update Shipment ID</label>
        <locationX>446</locationX>
        <locationY>5147</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.BillTo_Party_Address__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Billing_Address__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Bill_To_Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Customer__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Indirect_Account</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Shipment_Record</name>
        <label>Update Shipment Record</label>
        <locationX>512</locationX>
        <locationY>947</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Shipment_Stage__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Weighment Pending</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Origin_Hub_Manager</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Shipment_Stage</name>
        <label>Update Shipment Stage</label>
        <locationX>248</locationX>
        <locationY>839</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pending Billing</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Shipment_Stage__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>BVC Weighment Done</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Origin_Hub_Manager</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Sync_Status</name>
        <label>Update Sync Status</label>
        <locationX>446</locationX>
        <locationY>6779</locationY>
        <assignmentItems>
            <assignToReference>UpdateShipmentRecord.Is_Payment_Sync__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <decisions>
        <name>BVC_Weighment_Done</name>
        <label>BVC Weighment Done</label>
        <locationX>446</locationX>
        <locationY>731</locationY>
        <defaultConnector>
            <targetReference>Weighment_Pending</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>BVC_Weighment_is_Done</name>
            <conditionLogic>(1 AND 2) OR (3 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Gross_Weight__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Shipment_Stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Shipment Created</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Gross_Weight__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Gross_Weight__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Shipment_Stage</targetReference>
            </connector>
            <label>BVC Weighment is Done</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Delivery_Instruction</name>
        <label>Check Delivery Instruction</label>
        <locationX>446</locationX>
        <locationY>6263</locationY>
        <defaultConnector>
            <targetReference>Sync_Payment_Status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Customer_Status_is_equal_to_hold</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Customer__r.CustomerStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Hold</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Delivery_Instruction__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Hold</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Delivery_Instruction__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Select</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Delivery_Instruction</targetReference>
            </connector>
            <label>Customer Status is equal to hold</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Delivery_Record</name>
        <label>Check Delivery Record</label>
        <locationX>248</locationX>
        <locationY>4655</locationY>
        <defaultConnector>
            <targetReference>Delivery_Record_Assignment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Delivery_Record_is_NULL</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Delivery_Record</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Delivery_Record</targetReference>
            </connector>
            <label>If Delivery Record is NULL</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Delivery_records</name>
        <label>Check Delivery Records</label>
        <locationX>292</locationX>
        <locationY>5771</locationY>
        <defaultConnector>
            <targetReference>Check_Delivery_Instruction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Tracking_Update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Delivery_Record_for_delivery</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Delivery_Status</targetReference>
            </connector>
            <label>Tracking Update</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Route_Number</name>
        <label>Check Route Number</label>
        <locationX>446</locationX>
        <locationY>1823</locationY>
        <defaultConnector>
            <targetReference>Check_Verified_for_Billing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Assignee_Route</name>
            <conditionLogic>( 1 OR 2 ) AND 3</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Destination Port</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Destination Hub</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Address_Name__r.Delivery_Route_Number__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Route_Number</targetReference>
            </connector>
            <label>Assignee Route</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Verified_for_Billing</name>
        <label>Check Verified for Billing</label>
        <locationX>446</locationX>
        <locationY>2123</locationY>
        <defaultConnector>
            <targetReference>Ready_for_Rebilling</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Verified_for_Billing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Verified_for_Billing__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Verified_for_Billing__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsExhibition__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Verified_for_Billing_to_True</targetReference>
            </connector>
            <label>Verified for Billing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Create_Pickup_From_Shipment</name>
        <label>Create Pickup From Shipment</label>
        <locationX>446</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>BVC_Weighment_Done</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Pickup_is_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Pickup__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Is_Pickup_Created__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.API_or_Excel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Pickup_Record</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>If Pickup is Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Delivery_Assignment_Notification_1_0</name>
        <label>Delivery Assignment  Notification</label>
        <locationX>446</locationX>
        <locationY>4223</locationY>
        <defaultConnector>
            <targetReference>Update_Shipment_ID_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Create_Task_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Delivery_Route_Assigned_To__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Delivery_Route_Assigned_To__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Delivery_Route_Assigned_To__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notification_0</targetReference>
            </connector>
            <label>Create Task</label>
        </rules>
    </decisions>
    <decisions>
        <name>Destination_Hub_Manager</name>
        <label>Destination Hub Manager</label>
        <locationX>446</locationX>
        <locationY>1523</locationY>
        <defaultConnector>
            <targetReference>Check_Route_Number</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Update_Destination_Hub_Manager</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Picked Up</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Hub_Manager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Destination_hub_Manager_fields</targetReference>
            </connector>
            <label>Update Destination Hub Manager</label>
        </rules>
    </decisions>
    <decisions>
        <name>Destination_Hub_Type_Check</name>
        <label>Destination Hub &amp; Type Check</label>
        <locationX>446</locationX>
        <locationY>3323</locationY>
        <defaultConnector>
            <targetReference>Mismatch_notification</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Destination_Hub_Type</name>
            <conditionLogic>(1 AND (2 OR 3) ) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Destination_Address_Name__r.Active_Pincode__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Type__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Address_Name__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignee_Shipment_Destination_Hub_Type</targetReference>
            </connector>
            <label>Destination Hub &amp; Type</label>
        </rules>
    </decisions>
    <decisions>
        <name>FSE_Delivery_Assignment_By_Route_Number</name>
        <label>FSE Delivery Assignment By Route Number</label>
        <locationX>446</locationX>
        <locationY>3923</locationY>
        <defaultConnector>
            <targetReference>Delivery_Assignment_Notification_1_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Shipment_Within_hub</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Origin_Hub__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Hub__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Delivery_Route_Assigned_To__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Hub__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Destination_Hub__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Pickup__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Delivery_Assignment_Hub</targetReference>
            </connector>
            <label>Shipment Within hub</label>
        </rules>
        <rules>
            <name>Shipment_Delivery_Assignment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Delivery_Route_Assigned_To__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Destination Hub</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Delivery_Route_Number__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>FSE_Assignment_by_Route_Number</targetReference>
            </connector>
            <label>Shipment Delivery Assignment</label>
        </rules>
        <rules>
            <name>FSE_Delivery_Assignment</name>
            <conditionLogic>1 AND 2 AND 3 AND (4 OR 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Delivery_Route_Assigned_To__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Destination Port</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Destination Hub</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>FSE_Assignment</targetReference>
            </connector>
            <label>FSE Delivery Assignment</label>
        </rules>
    </decisions>
    <decisions>
        <name>Indirect_Account</name>
        <label>Indirect Account</label>
        <locationX>446</locationX>
        <locationY>5255</locationY>
        <defaultConnector>
            <targetReference>Tracking_Status_is_equal_to_delivered</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Indirect_Account_is_NULL</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Indirect_Account__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Value_to_Indirect_Account</targetReference>
            </connector>
            <label>Indirect Account is NULL</label>
        </rules>
    </decisions>
    <decisions>
        <name>Mismatch_notification</name>
        <label>Mismatch notification</label>
        <locationX>446</locationX>
        <locationY>3623</locationY>
        <defaultConnector>
            <targetReference>FSE_Delivery_Assignment_By_Route_Number</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Tracking_is_changed_mismatch_is_true</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Is_Count_Mismatch__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Hub_Manager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Destination_Hub_Manager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Notification</targetReference>
            </connector>
            <label>Tracking is changed &amp; mismatch is true</label>
        </rules>
    </decisions>
    <decisions>
        <name>Origin_Hub_Manager</name>
        <label>Origin Hub Manager</label>
        <locationX>446</locationX>
        <locationY>1223</locationY>
        <defaultConnector>
            <targetReference>Destination_Hub_Manager</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Update_Origin_Hub_Manager</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Picked Up</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Hub_Manager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Origin_Hub_Manager_fields</targetReference>
            </connector>
            <label>Update Origin Hub Manager</label>
        </rules>
    </decisions>
    <decisions>
        <name>Origin_Hub_Type_Check</name>
        <label>Origin Hub &amp; Type Check</label>
        <locationX>446</locationX>
        <locationY>3023</locationY>
        <defaultConnector>
            <targetReference>Destination_Hub_Type_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Origin_Hub_Type</name>
            <conditionLogic>(1 AND (2 OR 3)) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Origin_Address_Name__r.Active_Pincode__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Hub__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Type__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin_Address_Name__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignee_Shipment_Origin_Hub_Type</targetReference>
            </connector>
            <label>Origin Hub &amp; Type</label>
        </rules>
    </decisions>
    <decisions>
        <name>Ready_for_Rebilling</name>
        <label>Ready for Rebilling</label>
        <locationX>446</locationX>
        <locationY>2423</locationY>
        <defaultConnector>
            <targetReference>Shipping_note_number</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Ready_for_Rebilling_is_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Ready_for_Rebilling__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Ready_for_Rebilling__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsExhibition__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Ready_for_Rebilling_set_to_True</targetReference>
            </connector>
            <label>Ready for Rebilling is True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Shipping_note_number</name>
        <label>Shipping note number</label>
        <locationX>446</locationX>
        <locationY>2723</locationY>
        <defaultConnector>
            <targetReference>Origin_Hub_Type_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Shipping_note_number_is_blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Shipping_Note_Number__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Shipping_note_Number</targetReference>
            </connector>
            <label>Shipping note number is blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Sync_Payment_Status</name>
        <label>Sync Payment Status</label>
        <locationX>446</locationX>
        <locationY>6563</locationY>
        <defaultConnector>
            <targetReference>Update_Assign_ID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Payment_Sync</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Is_Payment_Sync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Delivery_Instruction__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Deliver</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Is_Payment_Sync__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Payment_Status_Update</targetReference>
            </connector>
            <label>Payment Sync</label>
        </rules>
    </decisions>
    <decisions>
        <name>Tracking_Status_is_equal_to_delivered</name>
        <label>Tracking Status is equal to delivered</label>
        <locationX>446</locationX>
        <locationY>5555</locationY>
        <defaultConnector>
            <targetReference>Check_Delivery_Instruction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Delivered</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Delivered</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Tracking_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Delivery_Record_for_delivery</targetReference>
            </connector>
            <label>Delivered</label>
        </rules>
    </decisions>
    <decisions>
        <name>Weighment_Pending</name>
        <label>Weighment Pending</label>
        <locationX>644</locationX>
        <locationY>839</locationY>
        <defaultConnector>
            <targetReference>Origin_Hub_Manager</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>for_Weighment_Pending</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Gross_Weight__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Net_Weight__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Shipment_Record</targetReference>
            </connector>
            <label>for Weighment Pending</label>
        </rules>
    </decisions>
    <description>adding Weighment Pending , Updating this version for checking the Exhibition checkbox as false.</description>
    <environments>Default</environments>
    <formulas>
        <name>IndirectAccount</name>
        <dataType>String</dataType>
        <expression>if( {!$Record.Bill_To_Account__r.ParentId} != null, {!$Record.Bill_To_Account__r.Parent.Name} , {!$Record.Bill_To_Account__r.Name} )</expression>
    </formulas>
    <interviewLabel>TMS Shipment - Record Update- After Save {!$Flow.CurrentDateTime}</interviewLabel>
    <label>TMS Shipment - Record Update- After Save</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Delivery_Record</name>
        <label>Create Delivery Record</label>
        <locationX>116</locationX>
        <locationY>4763</locationY>
        <connector>
            <targetReference>Update_Shipment_ID_0</targetReference>
        </connector>
        <inputAssignments>
            <field>Address__c</field>
            <value>
                <elementReference>$Record.Destination_Address_Name__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.Delivery_Route_Assigned_To__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipment__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Created</stringValue>
            </value>
        </inputAssignments>
        <object>Delivery__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Pickup_Record</name>
        <label>Create Pickup Record</label>
        <locationX>314</locationX>
        <locationY>431</locationY>
        <connector>
            <targetReference>Out_for_Pickup</targetReference>
        </connector>
        <inputAssignments>
            <field>Customer__c</field>
            <value>
                <elementReference>$Record.Customer__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pickup_Date__c</field>
            <value>
                <elementReference>$Record.Shipment_Date__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pickup_Date_and_Time__c</field>
            <value>
                <elementReference>$Record.Shipment_Created_Date_Time__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pickup_Route_Number__c</field>
            <value>
                <elementReference>$Record.Origin_Address_Name__r.Pickup_Route_Number__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipment__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipper_Address__c</field>
            <value>
                <elementReference>$Record.Origin_Address_Name__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipper_Name__c</field>
            <value>
                <elementReference>$Record.Shipper_Name_TMS__c</elementReference>
            </value>
        </inputAssignments>
        <object>Pickup__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_Task_Record</name>
        <label>Create Task Record</label>
        <locationX>248</locationX>
        <locationY>4439</locationY>
        <connector>
            <targetReference>Get_Delivery_Record</targetReference>
        </connector>
        <inputReference>TaskRecord</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Delivery_Record</name>
        <label>Get Delivery Record</label>
        <locationX>248</locationX>
        <locationY>4547</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Delivery_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Shipment__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Delivery__c</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Delivery_Record_for_delivery</name>
        <label>Get Delivery Record for delivery</label>
        <locationX>292</locationX>
        <locationY>5663</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Delivery_records</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Shipment__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Delivery__c</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Default_Shipment_Value</name>
        <label>Update Default Shipment Value</label>
        <locationX>446</locationX>
        <locationY>7211</locationY>
        <inputReference>UpdateShipmentRecord</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Delivery_Record</name>
        <label>Update Delivery Record</label>
        <locationX>380</locationX>
        <locationY>4871</locationY>
        <connector>
            <targetReference>Update_Shipment_ID_0</targetReference>
        </connector>
        <inputReference>DELIVERY_RECORD</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Delivery_Status_to_Delivered</name>
        <label>Update Delivery Status to Delivered</label>
        <locationX>160</locationX>
        <locationY>5987</locationY>
        <connector>
            <targetReference>Check_Delivery_Instruction</targetReference>
        </connector>
        <inputReference>DELIVERY_RECORD</inputReference>
    </recordUpdates>
    <start>
        <locationX>320</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Create_Pickup_From_Shipment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Customer_Product_Category__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>BATH</stringValue>
            </value>
        </filters>
        <filters>
            <field>Customer_Product_Category__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>eSHIP</stringValue>
            </value>
        </filters>
        <object>Shipment__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>TaskDescription</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Shipping Note Number : {!$Record.Shipping_Note_Number__c}</text>
    </textTemplates>
    <textTemplates>
        <name>TaskSubject</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>&lt;p&gt;Delivery is assigned to you.&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>DELIVERY_RECORD</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Delivery__c</objectType>
    </variables>
    <variables>
        <name>PickupRecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TaskRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Task</objectType>
    </variables>
    <variables>
        <name>UpdateShipmentRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Shipment__c</objectType>
    </variables>
</Flow>
